<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¿€èµ°ï¼çŒ«å¼·åˆ¶èµ°è¡Œé«˜é€Ÿãƒ¬ãƒ¼ã‚¹</title>
    <style>
        body {
            font-family: "MS PGothic", sans-serif;
            padding: 10px;
            background-color: #f0f0f0;
            text-align: center;
            touch-action: manipulation;
        }
        h1 { margin: 10px 0; font-size: 24px; }
        

        #track-container {
            margin-top: 20px;
            background: #fff;
            border: 2px solid #000;
            display: none;
        }
        .lane {
            border-bottom: 1px dashed #999;
            height: 50px;
            position: relative;
            display: flex;
            align-items: center;
        }
        .lane:last-child { border-bottom: none; }
        

        .goal-line {
            position: absolute;
            right: 10%;
            top: 0;
            bottom: 0;
            width: 5px;
            background-color: red;
            z-index: 0;
        }

        /* çŒ« */
        .cat {
            position: absolute;
            font-size: 30px;
            left: 0;
            transition: left 0.007s linear; /* ã‚«ã‚¯ã‚«ã‚¯ã—ã™ããªã„ã‚ˆã†ã« */
            z-index: 1;
            white-space: nowrap;
        }
        .cat-name {
            font-size: 10px;
            position: absolute;
            top: -5px;
            left: 0;
            background: rgba(255,255,255,0.8);
        }

        /* äºˆæƒ³ãƒœã‚¿ãƒ³ */
        .bet-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 5px 0;
            font-size: 18px;
            cursor: pointer;
            background: #ddd;
            border: 2px solid #555;
        }
        .bet-btn:active { background: #bbb; }

        /* çµæœè¡¨ç¤º */
        #result-area {
            display: none;
            margin-top: 20px;
            border: 3px double red;
            padding: 10px;
            background: yellow;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="setup-screen">
        <h1>ğŸ æ¿€èµ°ï¼çŒ«å¼·åˆ¶èµ°è¡Œé«˜é€Ÿãƒ¬ãƒ¼ã‚¹ ğŸ</h1>
        <p>ã©ã®çŒ«ãŒå‹ã¤ã‹äºˆæƒ³ã—ã¦ã‚¿ãƒƒãƒ—ã›ã‚ˆï¼</p>
        <div id="bet-buttons">
            </div>
    </div>

    <h2 id="status-msg" style="color: red; font-size: 40px; display:none;"></h2>

    <div id="track-container">
        </div>

    <div id="result-area">
        <div id="result-text"></div>
        <button onclick="location.reload()" style="font-size: 20px; margin-top: 10px; padding: 10px;">ã‚‚ã†ä¸€å›ã‚„ã‚‹</button>
    </div>

<script>
    // --- è¨­å®š (Pythonã‹ã‚‰ç§»æ¤) ---
    const RACE_LENGTH = 90; // CSSã®%ã§ã‚´ãƒ¼ãƒ«åˆ¤å®š (å³ç«¯10%æ®‹ã—)
    const NUM_CATS = 6;
    const MIN_MOVE = 1;
    const MAX_MOVE = 4; // ã‚¹ãƒãƒ›ã ã¨ç”»é¢ãŒç‹­ã„ã®ã§å°‘ã—é€²ã¿ã‚„ã™ãèª¿æ•´

    // çŒ«ãƒªã‚¹ãƒˆ
    let cats = [
        {name: "ã‚¿ãƒ", symbol: "ğŸ˜¼", pos: 0},
        {name: "ãƒŸã‚±", symbol: "ğŸ˜º", pos: 0},
        {name: "ã‚¯ãƒ­", symbol: "ğŸ˜¹", pos: 0},
        {name: "ã‚·ãƒ­", symbol: "ğŸ˜»", pos: 0},
        {name: "ãƒãƒ", symbol: "ğŸ˜½", pos: 0},
        {name: "ãƒ†ã‚ª", symbol: "ğŸˆ", pos: 0},
    ];

    // çŒ«ã®æ•°ã‚’èª¿æ•´
    if (cats.length > NUM_CATS) cats = cats.slice(0, NUM_CATS);

    let predictedIndex = -1;
    let timerId = null;

    // --- åˆæœŸåŒ– ---
    window.onload = function() {
        const btnContainer = document.getElementById('bet-buttons');
        const trackContainer = document.getElementById('track-container');


        cats.forEach((cat, index) => {

            const btn = document.createElement('button');
            btn.className = 'bet-btn';
            btn.innerText = `[${index + 1}] ${cat.name} ${cat.symbol}`;
            btn.onclick = () => startSequence(index);
            btnContainer.appendChild(btn);

 
            const lane = document.createElement('div');
            lane.className = 'lane';
            

            const goal = document.createElement('div');
            goal.className = 'goal-line';
            lane.appendChild(goal);


            const catElem = document.createElement('div');
            catElem.className = 'cat';
            catElem.id = `cat-${index}`;
            catElem.innerHTML = `<span class="cat-name">${cat.name}</span>${cat.symbol}`;
            lane.appendChild(catElem);

            trackContainer.appendChild(lane);
        });
    };


    function startSequence(choiceIndex) {
        predictedIndex = choiceIndex;
        document.getElementById('setup-screen').style.display = 'none';
        document.getElementById('track-container').style.display = 'block';
        
        const statusMsg = document.getElementById('status-msg');
        statusMsg.style.display = 'block';


        let count = 3;
        statusMsg.innerText = count;
        
        const countdown = setInterval(() => {
            count--;
            if (count > 0) {
                statusMsg.innerText = count;
            } else if (count === 0) {
                statusMsg.innerText = "GO!!";
            } else {
                clearInterval(countdown);
                statusMsg.style.display = 'none'; // GOã‚’æ¶ˆã™
                runRace();
            }
        }, 800);
    }

    function runRace() {

        timerId = setInterval(() => {
            let winnerIndex = -1;

            for (let i = 0; i < cats.length; i++) {

                const move = Math.floor(Math.random() * (MAX_MOVE - MIN_MOVE + 1)) + MIN_MOVE;
                cats[i].pos += move;


                const catElem = document.getElementById(`cat-${i}`);
                catElem.style.left = cats[i].pos + "%";


                if (cats[i].pos >= RACE_LENGTH) {
                    winnerIndex = i;
                    break;
                }
            }


            if (winnerIndex !== -1) {
                clearInterval(timerId);
                showResult(winnerIndex);
            }

        }, 100); 
    }

    function showResult(winnerIndex) {
        const resultArea = document.getElementById('result-area');
        const resultText = document.getElementById('result-text');
        const winner = cats[winnerIndex];

        resultArea.style.display = 'block';
        
        let msg = `<h1>ğŸ‰ å‹è€…: ${winner.name} ${winner.symbol} ğŸ‰</h1>`;
        
        if (winnerIndex === predictedIndex) {
            msg += `<h2 style="color:red;">ğŸŠåœ§å€’çš„å‹åˆ©ğŸŠ</h2>`;
            document.body.style.backgroundColor = "#ffcccc"; // å½“ãŸã‚Šæ¼”å‡º
        } else {
            const pred = cats[predictedIndex];
            msg += `<p>ã–ã‚“ã­ã‚“... ã‚ãªãŸã®äºˆæƒ³ ${pred.name} ã¯å¤–ã‚Œã§ã™ã€‚ãŠå‰ã®è² ã‘</p>`;
            document.body.style.backgroundColor = "#ccc"; // ãƒã‚ºãƒ¬æ¼”å‡º
        }

        resultText.innerHTML = msg;
        window.scrollTo(0, document.body.scrollHeight); // çµæœã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
    }
</script>
</body>
</html>
